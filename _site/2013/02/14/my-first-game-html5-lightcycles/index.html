<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="For the past few months I have been playing with the HTML5 canvas element off and on, eventually building TRON, my first canvas game."><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta property="og:title" content="My first game - HTML5 lightcycles - JDStraughan" /><meta property="og:description" content="For the past few months I have been playing with the HTML5 canvas element off and on, eventually building TRON, my first canvas game." /><meta property="og:url" content="http://jdstraughan.com/2013/02/14/my-first-game-html5-lightcycles" /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="My first game - HTML5 lightcycles - JDStraughan" /><meta name="twitter:description" content="For the past few months I have been playing with the HTML5 canvas element off and on, eventually building TRON, my first canvas game." /><meta name="twitter:url" content="http://jdstraughan.com/2013/02/14/my-first-game-html5-lightcycles" /> <script type="application/ld+json"> { "@context": "http://schema.org", "@type": "Blog", "author": "Jason Straughan", "isFamilyFriendly": "http://schema.org/True", "url": "http://jdstraughan.com", "description": "For the past few months I have been playing with the HTML5 canvas element off and on, eventually building TRON, my first canvas game." } </script><title>My first game - HTML5 lightcycles - JDStraughan</title><link rel="canonical" href="http://jdstraughan.com/2013/02/14/my-first-game-html5-lightcycles"><link rel="stylesheet" href="/css/jdstraughan.min.css"><link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'><link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'><link rel="alternate" type="application/rss+xml" title="jdstraughan.com" href="http://jdstraughan.com/feed.xml" />   <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]--></head><body><nav class="navbar navbar-default" role="navigation"><div class="navbar-header"> <a class="navbar-brand" href="/">JDStraughan</a></div><div><ul class="nav navbar-nav navbar-right"><li> <a href="/">Home</a></li><li> <a href="/about.html">About</a></li></ul></div></nav><div itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="description" content="For the past few months I have been playing with the HTML5 canvas element off and on, eventually building TRON, my first canvas game." /><meta itemprop="author" content="Jason Straughan" /><header class="intro-header" style="background-image: url('/img/header/tron.jpg')"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="post-heading"><h1 itemprop="name">My first game - HTML5 lightcycles</h1><span class="meta">Posted on <span itemprop="datePublished">February 14, 2013</span></span> <span class="image-credit">Image Credit: Pacifier (Own work) [<a href="http://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA-3.0</a>], <a href="http://commons.wikimedia.org/wiki/File%3ATron_bryce.jpg">via Wikimedia Commons</a></span></div></div></div></div></header><article><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div itemprop="articleBody"><p>For the past few months I have been playing with the <a href="http://en.wikipedia.org/wiki/Canvas_element">HTML5 canvas element</a> off and on. In recent years it has been the subject of much excitement in the web development community, and as matured rapidly in modern browsers. Now there are a wide variety of games and activities that utilize this relatively new element.</p><p>For whatever reasons, I just assumed manipulating the canvas would be a pain in the ass, so I avoided it. I thought, “I am not a game developer, so I have no need for it.” I understood that not all canvas use was in the realm of game development, however, the other use cases weren’t inspiring me to learn.</p><p>So I ignored the canvas.</p><p>Until a few months ago. I was reading a thread on reddit and commenting to a new web developer about how learning to program is a process of writing code that does not work properly, finding the issues, fixing them, and then moving on. In this same thread, someone had commented that when they get bored learning a particular programming lesson, they just fire up <a href="http://jsfiddle.net/">jsfiddle</a> and play with the canvas - because, they said - “it is just so fun and simple”.</p><p>Fun and simple? Canvas?</p><p>“Canvas is simple and fun”, they said. “Reddit is full of trolls”, I said. I don’t like to feed the trolls. If it was simple, everyone would be doing it. If it were simple, then even I could write a game in javascript. So like any good redditor, I fired up my browser and was going to prove to the world that this cannot be, in any way, simple.</p><p>A few minutes later I had a square drawn on my screen. A few hours later I had multiple shapes in different colors. And they were moving. By the end of that first day, I had accomplished no real work, but I had shapes moving on my screen, under my control.</p><p>My mind exploded with ideas. Every mirror I passed had a cheerful Gabe Newell staring back at me. It had been over twenty years since I thought about writing games when I grew up. I have written code all my life, but somewhere along the way I lost the dream of my childhood. I had never written a game.</p><p>Unfortunately, I have a job. Where I write code. I can’t really complain, I like writing code, but everyday my mind was aching to get back to the canvas. Although I have not been able to devote large swaths of time to this endeavor, a few hours here and there is all that is needed to learn the basics required to get a game going in HTML5. I’d draw shapes, make them spin, move, wrap, warp, and collide.</p><p>I had finally done it - I was writing a game. Several, in fact. I had started a snake game, an asteroids game, and a math puzzle game. I was like Peter Pan. I tinkered with each, wrote and replaced a lot of bad code, contemplated how to determine if my shape collided with another, read stack overflow, blogs, and docs.</p><p>A few days ago I decided to lower the bar, and just sit down and complete a game. Something that could be played, had a beginning and an end, and was fun. Thinking about what I wanted to build, I started with a small blue box and started moving it around the canvas. Then I commented out the code that redraws the board several times a second and kept “playing”. As you can guess, the box did not just move anymore, it just “expanded” in one direction. Like the lightcycles from Tron.</p><p>I was 7 (the same age my son is now) when Tron came to the movie theater, and it changed my life. Programs, users, computers, graphics, gaming: Tron had it all. It was also one of the first VHS movies we had, and I am sure I just about wore the tape out. Once the arcade game was released, like many kids in the 80s, I dropped every quarter I could find into it. Of all the games it offered, I loved the lightcycles. I fought for the Users.</p><div class="video"> <iframe width="640" height="480" src="http://www.youtube.com/embed/ONg0rUogiEg?rel=0" frameborder="0" allowfullscreen=""></iframe><h5>Original Tron arcade game - lightcycle level</h5></div><p>I had my inspiration. I’d build a lightcycle game.</p><p>For the uninitiated, like myself, the logic behind gaming is a mystery. I have contemplated it often, but in all honesty have not read much on the subject.</p><p>Based on my previous experiments, reading lots of blog posts (I wish I could list them all here) and a fair amount of generous stackoverflow answers, I could make my cycle appear, move, and I had figured out how to detect if I had left the game grid.</p><p>The canvas, after all, is just a bitmap with a simple API. Like an etch-a-sketch. You can move to a location, draw, fill, relocate, etc. Because this etch-a-sketch is in a computer, you can refresh it so many times a second no one will ever be the wiser. That is how animation works.</p><p>The tutorials, blogs, and answers got me that far. Beyond this was still covered in a cloud of mystery. In my snake game I had not crossed the issue of the snake colliding with itself, and randomizing the location of the bait after each consumption was pretty easy. While this attempt at a game has not found completion, it was the early sandbox that I used to work with. This lightcycle game was going to require an enemy, not just a piece of bait. This enemy would need to have some intelligence, the game would need to know when there was a collision, and it would need to determine a winner. These all seemed like daunting tasks.</p><p>I thought about studying up on some game development, finding a good framework, and putting together a game. Someday I may do this, but I decided to stick with native js, learn the ropes, see what is happening under the hood. I’d just try to solve some of these problems and then go see how others do it. For the lightcycle’s walls, for example, I just made a <code>history</code> array withe coordinates of each movement. Each time a cycle moves, it checks that the new coordinates are not outside the map, or in the history of either cycle. Why did I not just lump them all into one array? Who knows, I was too busy trying to figure out how to make it work. Is there a better way? I sure hope so, but this was working so I moved on.</p><blockquote><p>Note: A redditor pointed out it would be better to have an game board 2D array that stores the x,y coords of used tiles and instead of checking <code>indexOf</code> for each cycle’s history, I can just look for existence of the x,y in the array. I’ll add this in the next iteration of the game. Thanks <em>dmcinnes</em>!</p></blockquote><p>Soon I had collisions, movement, light. I felt close to completion. Then I realized I had to create some way to control the enemy cycle, and it was not going to write itself. For my first attempt, I simply had the enemy cycle start each turn looking right, and if it could go right it did. Then it looked up, then left, then down. It was not the smartest cycle in the world, but it gave me something to play against while testing my other code.</p><p>In my second attempt at “AI” (I use that term very loosely), I decided to create an advisor method. This function would scan the 4 directions, determine the best one, and advise the cycle of the direction with the most runway. If the current direction was blocked in the next tile, it would turn using the best route. To keep the player on their toes, it also has a ~10% chance of turning to the advisor’s best option on each turn.</p><p>Not the most elegant approach, I admit, but it works. As of the time of this writing, it is what is currently controlling the Program bike. This method does beat me more often than I’d care to admit. Of all the areas I’d like to spend more time perfecting, this is the most intriguing to me.</p><p>Overall, I am quite happy that for under 250 lines of javascript I was able to produce a playable game that is both fun and challenging. If you are looking for a simple and fun way to expand your programming chops, I highly recommend trying out the canvas element.</p><p>You can play my HTML5 lightcycle game <a href="http://jsfiddle.net/PxpVr/17/embedded/result/">in 640x480 mode here</a>, or <a href="http://jsfiddle.net/PxpVr/16/embedded/result/">in 320x240 mode here</a>. As always, source code is <a href="https://github.com/JDStraughan/html5-lightcycles">available on GitHub</a>.</p></div><hr><ul class="pager"><li class="previous"> <a href="/2013/02/07/nonews-part-2-the-source" data-toggle="tooltip" data-placement="top" title="NoNews Part II - The Source">&larr; Previous Post</a></li><li class="next"> <a href="/2013/03/05/html5-snake-with-source-code-walkthrough" data-toggle="tooltip" data-placement="top" title="HTML5 Snake source code walkthrough">Next Post &rarr;</a></li></ul><hr><div id="disqus_thread" itemprop="comment"></div><script type="text/javascript"> /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */ var disqus_shortname = 'jdstraughan'; // required: replace example with your forum shortname /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><hr> Related Posts<ul class="naked"><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2015/06/04/our-walt-disney-world-trip-planning-faq" itemprop="url"><span itemprop="name">Our Walt Disney World Trip Planning Frequently Asked Questions</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="My family and I are Disney fanatics. These are the questions most often asked by friends traveling to Walt Disney World." /><meta itemprop="datePublished" content="June 4, 2015" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2015/05/23/its-a-great-big-beautiful-tomorrowland" itemprop="url"><span itemprop="name">It's a Great Big Beautiful Tomorrowland</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="Everyone that knows me knows I am a Disneyphile so its no surprise that we were excited to view the new Disney movie Tomorrowland." /><meta itemprop="datePublished" content="May 23, 2015" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/08/14/3-Day-Startup-San-Antonio-at-Geekdom-2013" itemprop="url"><span itemprop="name">3 Day Startup San Antonio at Geekdom (Summer 2013)</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="The idea of 3 Day Startup is simple: start a company over the course of three days. This past weekend I was fortunate enough to participate." /><meta itemprop="datePublished" content="August 14, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/07/01/neo4j-or-how-I-learned-to-stop-worrying-and-love-the-graph" itemprop="url"><span itemprop="name">Introduction to Graph Databases using Neo4j</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="For those that are unfamiliar with graph databases, they do not store graphs in the chart sense, but rather graph structures." /><meta itemprop="datePublished" content="July 1, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/04/18/the-day-the-music-went-blind" itemprop="url"><span itemprop="name">The day the music went blind</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="The soundtrack of my youth was illustrated by Storm Thorgerson. He made music visual...a tribute to Storm." /><meta itemprop="datePublished" content="April 18, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/03/31/darth-vader-dreams-of-electric-sheep" itemprop="url"><span itemprop="name">Darth Vader Dreams of Electric Sheep</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="My kid has never heard a busy signal, and I doubt he'd recognize a dial-tone. In his world view, flip phones are the technology of the ancients." /><meta itemprop="datePublished" content="March 31, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/03/14/homemade-ginger-ale-is-so-easy" itemprop="url"><span itemprop="name">Homemade Ginger Ale that is so easy (even a 7 year old can do it)</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="I've enjoyed finding craft sodas, and my son has developed quite the palette for fine root beers. So we decided to make our own ginger beer." /><meta itemprop="datePublished" content="March 14, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/03/05/html5-snake-with-source-code-walkthrough" itemprop="url"><span itemprop="name">HTML5 Snake source code walkthrough</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="Learn how to make a version of the popular snake game using the HTML canvas element and javascript. Fun for all ages, and easy to code." /><meta itemprop="datePublished" content="March 5, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/02/07/nonews-part-2-the-source" itemprop="url"><span itemprop="name">NoNews Part II - The Source</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="In this post I'd like to walk-through the source code of the NoNews extensions and explain how it works." /><meta itemprop="datePublished" content="February 7, 2013" /></li><li itemscope="" itemtype="http://schema.org/BlogPosting"> <a href="/2013/01/29/nonews-is-good-news" itemprop="url"><span itemprop="name">NoNews (is Good News!)</span></a><meta itemprop="author" content="Jason Straughan" /><meta itemprop="description" content="NoNews is a Google Chrome extension that was built to assist me (and you) in avoiding passively reading the news. Face it, the news is depressing." /><meta itemprop="datePublished" content="January 29, 2013" /></li></ul></div></div></div></article><hr></div><footer><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li> <a href="/feed.xml"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-rss fa-stack-1x fa-inverse"></i> </span> </a></li><li> <a href="https://www.linkedin.com/in/JDStraughan"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i> </span> </a></li><li> <a href="https://github.com/JDStraughan"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-github fa-stack-1x fa-inverse"></i> </span> </a></li><li> <a href="https://twitter.com/jdstraughan"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-twitter fa-stack-1x fa-inverse"></i> </span> </a></li><li> <a href="https://www.facebook.com/JDStraughan"> <span class="fa-stack fa-lg"> <i class="fa fa-circle fa-stack-2x"></i> <i class="fa fa-facebook fa-stack-1x fa-inverse"></i> </span> </a></li></ul><p class="copyright text-muted">Copyright &copy; JDStraughan 2015</p></div></div></div></footer><script src="//code.jquery.com/jquery-1.11.0.min.js"></script> <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>  <script src="/js/bootstrap.min.js "></script>  <script src="/js/clean-blog.js "></script>  <script src="//static.getclicky.com/js" type="text/javascript"></script> <script type="text/javascript">try{ clicky.init(66405120); }catch(e){}</script> <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66405120ns.gif" /></p></noscript></body></html>
